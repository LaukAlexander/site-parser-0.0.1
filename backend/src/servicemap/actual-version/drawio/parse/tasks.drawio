<mxfile host="drawio-plugin" modified="2023-05-01T17:59:33.887Z" agent="5.0 (Windows NT 6.2; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/104.0.5112.102 Safari/537.36" etag="DtqVxKij169F1kfoRlkR" version="20.5.3" type="embed"><diagram name="Страница 1" id="qCNLvIIqHfw9IIQVVRMi"><mxGraphModel dx="1561" dy="801" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" background="#ffffff" math="0" shadow="0"><root><mxCell id="0"/><mxCell id="1" parent="0"/><mxCell id="IQdeU8apSQBM7l4QD6ii-18" value="ParseRepository" style="rounded=0;whiteSpace=wrap;html=1;fontSize=13;fontStyle=1;verticalAlign=top;fillColor=none;dashed=1;dashPattern=12 12;" parent="1" vertex="1"><mxGeometry x="1670" y="40" width="290" height="440" as="geometry"/></mxCell><mxCell id="IQdeU8apSQBM7l4QD6ii-17" value="TaskService" style="rounded=0;whiteSpace=wrap;html=1;fontSize=13;fontStyle=1;verticalAlign=top;fillColor=none;dashed=1;dashPattern=12 12;" parent="1" vertex="1"><mxGeometry x="1050" y="40" width="240" height="840" as="geometry"/></mxCell><mxCell id="IQdeU8apSQBM7l4QD6ii-6" value="TaskController" style="rounded=0;whiteSpace=wrap;html=1;verticalAlign=top;fillColor=none;dashed=1;dashPattern=12 12;fontSize=13;fontStyle=1" parent="1" vertex="1"><mxGeometry x="775" y="40" width="240" height="440" as="geometry"/></mxCell><mxCell id="UjvpqchdZE0tRtBwlCUI-1" value="Tasks" style="rounded=0;whiteSpace=wrap;html=1;fontStyle=1;fontSize=14;" parent="1" vertex="1"><mxGeometry width="80" height="40" as="geometry"/></mxCell><mxCell id="UjvpqchdZE0tRtBwlCUI-2" value="Version 1" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1"><mxGeometry x="2133" width="67" height="40" as="geometry"/></mxCell><mxCell id="UjvpqchdZE0tRtBwlCUI-4" value="&lt;b&gt;Данные отображения&lt;/b&gt;:&lt;br&gt;список задач;&lt;br&gt;задача(название задачи, название сайта, краткое описание таски);&lt;br&gt;&lt;br&gt;Будут кнопки на фронте:&lt;br&gt;запустить задачу;&lt;br&gt;остановить задачу;&lt;br&gt;посмотреть логи;&lt;br&gt;проверить статус парсинга;&lt;br&gt;&lt;br&gt;&lt;b&gt;Бэк&lt;/b&gt;:&lt;br&gt;&lt;b&gt;получение списка задач&lt;/b&gt;:&lt;br&gt;вызов метода контроллера (TaskController#all) -&lt;br&gt;метод получения полного списка задач (TaskService#getAllTasks() -&lt;br&gt;метод получения всех site_operations из базы (ParseRepository#getAllSiteOperations() -&lt;br&gt;если есть, то вызврат 200&lt;br&gt;если пустая таблица - 204 (нет данных)&lt;br&gt;если ошибка - 500;&lt;br&gt;&lt;br&gt;&lt;b&gt;запустить задачу&lt;/b&gt;:&lt;br&gt;вызов метода контроллера (TaskController#start(site_operation:json)) -&lt;br&gt;вызов сервиса управления парсерами (TaskService#start(site_operation:json)) -&lt;br&gt;проверка на существование потока (TaskService#checkThread(site_operation_id) -&lt;br&gt;если есть, то возврат 206 (уже вызывалось)&lt;br&gt;если нет, то:&lt;br style=&quot;border-color: var(--border-color);&quot;&gt;создание и сохранение отдельного потока в HashMap (TaskService#createThread(site_operation_id)) -&amp;nbsp;&lt;br&gt;вызов метода парсинга (ParseService#startNewParsing(site_operation_id, settings) -&lt;br&gt;изменение флага в таблице (ParseService#changeParsingStatus(site_operation_id, true):&lt;br&gt;сохранить site_operation (ParseRepository#saveSiteOperation(siteOperation)) -&lt;br&gt;если успешно запущен поток парсинга возвращает 200&lt;br&gt;если ошибка - 500;&lt;br&gt;&lt;br&gt;&lt;b&gt;остановить задачу&lt;/b&gt;:&lt;br&gt;(TaskController#stop(site_operation_id)) -&lt;br&gt;(TaskService#stop(site_operation_id)) -&lt;br&gt;проверка, есть ли поток с данным id в списке выполняемых (TaskService#checkThread(site_operation_id)) -&lt;br&gt;если нет, то возврат 404 (не найдено)&lt;br&gt;если есть, то:&lt;br&gt;вызов метода прерывающий выполнение потока (TaskService#stopThread(site_operation_id)) -&lt;br style=&quot;border-color: var(--border-color);&quot;&gt;изменение флага в таблице (ParseService#changeParsingStatus(site_operation_id, false) -&lt;br style=&quot;border-color: var(--border-color);&quot;&gt;сохранить site_operation (ParseRepository#saveSiteOperation(siteOperation)) -&lt;br&gt;если успешно, то возврат 200&lt;br&gt;если ошибка - 500;&lt;br&gt;&lt;br&gt;&lt;b&gt;посмотреть логи&lt;/b&gt;:&lt;br&gt;(TaskConntroller#getLogs(site_operation_id)) -&lt;br&gt;(TaskService#getLogs(site_operation_id)) -&lt;br&gt;получение из базы данных (ParseRepository#getReportBySiteOperationId(site_operation_id)) -&lt;br&gt;если есть, то возвращается 200&lt;br&gt;если нет - 204 (нет данных)&lt;br&gt;если ошибка - 500;&lt;br&gt;&lt;br&gt;&lt;b&gt;проверить статус парсинга&lt;/b&gt;:&lt;br&gt;(TaskController#getStatus(site_operation_id)) -&lt;br&gt;(TaskService#getStatus(site_operation_id)) -&lt;br&gt;(ParseRepository#getSiteOperationStatusById(site_operation_id)) -&lt;br&gt;если успех вернуть 200&lt;br&gt;если ошибка - 500" style="rounded=0;whiteSpace=wrap;html=1;verticalAlign=top;align=center;" parent="1" vertex="1"><mxGeometry y="40" width="606" height="840" as="geometry"/></mxCell><mxCell id="IQdeU8apSQBM7l4QD6ii-12" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="IQdeU8apSQBM7l4QD6ii-1" target="IQdeU8apSQBM7l4QD6ii-7" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="IQdeU8apSQBM7l4QD6ii-1" value="Получить список задач" style="ellipse;whiteSpace=wrap;html=1;" parent="1" vertex="1"><mxGeometry x="610" y="60" width="120" height="80" as="geometry"/></mxCell><mxCell id="IQdeU8apSQBM7l4QD6ii-13" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="IQdeU8apSQBM7l4QD6ii-2" target="IQdeU8apSQBM7l4QD6ii-8" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="IQdeU8apSQBM7l4QD6ii-2" value="Запустить задачу" style="ellipse;whiteSpace=wrap;html=1;" parent="1" vertex="1"><mxGeometry x="610" y="140" width="120" height="80" as="geometry"/></mxCell><mxCell id="IQdeU8apSQBM7l4QD6ii-14" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="IQdeU8apSQBM7l4QD6ii-3" target="IQdeU8apSQBM7l4QD6ii-9" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="IQdeU8apSQBM7l4QD6ii-3" value="Остановить задачу" style="ellipse;whiteSpace=wrap;html=1;" parent="1" vertex="1"><mxGeometry x="610" y="220" width="120" height="80" as="geometry"/></mxCell><mxCell id="IQdeU8apSQBM7l4QD6ii-15" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="IQdeU8apSQBM7l4QD6ii-4" target="IQdeU8apSQBM7l4QD6ii-10" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="IQdeU8apSQBM7l4QD6ii-4" value="Посмотреть логи" style="ellipse;whiteSpace=wrap;html=1;" parent="1" vertex="1"><mxGeometry x="610" y="300" width="120" height="80" as="geometry"/></mxCell><mxCell id="IQdeU8apSQBM7l4QD6ii-16" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="IQdeU8apSQBM7l4QD6ii-5" target="IQdeU8apSQBM7l4QD6ii-11" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="IQdeU8apSQBM7l4QD6ii-5" value="Проверить статус парсинга" style="ellipse;whiteSpace=wrap;html=1;" parent="1" vertex="1"><mxGeometry x="610" y="380" width="120" height="80" as="geometry"/></mxCell><mxCell id="IQdeU8apSQBM7l4QD6ii-22" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="IQdeU8apSQBM7l4QD6ii-7" target="IQdeU8apSQBM7l4QD6ii-21" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="IQdeU8apSQBM7l4QD6ii-7" value="all(GET)" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1"><mxGeometry x="810" y="80" width="170" height="40" as="geometry"/></mxCell><mxCell id="ghI51QlMgrLUa65lggI6-1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="IQdeU8apSQBM7l4QD6ii-8" target="IQdeU8apSQBM7l4QD6ii-19" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="IQdeU8apSQBM7l4QD6ii-8" value="start(POST)&lt;br&gt;* requestBody (siteOperation)" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1"><mxGeometry x="810" y="160" width="170" height="40" as="geometry"/></mxCell><mxCell id="ghI51QlMgrLUa65lggI6-33" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="IQdeU8apSQBM7l4QD6ii-9" target="ghI51QlMgrLUa65lggI6-32" edge="1"><mxGeometry relative="1" as="geometry"><Array as="points"><mxPoint x="1030" y="260"/><mxPoint x="1030" y="500"/></Array></mxGeometry></mxCell><mxCell id="IQdeU8apSQBM7l4QD6ii-9" value="stop(PATCH)&lt;br&gt;* siteOperationId" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1"><mxGeometry x="810" y="240" width="170" height="40" as="geometry"/></mxCell><mxCell id="ghI51QlMgrLUa65lggI6-58" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="IQdeU8apSQBM7l4QD6ii-10" target="ghI51QlMgrLUa65lggI6-56" edge="1"><mxGeometry relative="1" as="geometry"><Array as="points"><mxPoint x="1000" y="340"/><mxPoint x="1000" y="740"/></Array></mxGeometry></mxCell><mxCell id="IQdeU8apSQBM7l4QD6ii-10" value="getLogs(GET)&lt;br&gt;* siteOperationId" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1"><mxGeometry x="810" y="320" width="170" height="40" as="geometry"/></mxCell><mxCell id="ghI51QlMgrLUa65lggI6-66" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="IQdeU8apSQBM7l4QD6ii-11" target="ghI51QlMgrLUa65lggI6-65" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="IQdeU8apSQBM7l4QD6ii-11" value="getStatus(GET)&lt;br&gt;* siteOperationId" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1"><mxGeometry x="810" y="400" width="170" height="40" as="geometry"/></mxCell><mxCell id="ghI51QlMgrLUa65lggI6-19" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0;entryY=0.25;entryDx=0;entryDy=0;" parent="1" source="IQdeU8apSQBM7l4QD6ii-19" target="ghI51QlMgrLUa65lggI6-2" edge="1"><mxGeometry relative="1" as="geometry"><Array as="points"><mxPoint x="1170" y="220"/><mxPoint x="1060" y="220"/><mxPoint x="1060" y="410"/></Array></mxGeometry></mxCell><mxCell id="IQdeU8apSQBM7l4QD6ii-19" value="start(siteOperationEntity)" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1"><mxGeometry x="1090" y="160" width="160" height="40" as="geometry"/></mxCell><mxCell id="IQdeU8apSQBM7l4QD6ii-24" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="IQdeU8apSQBM7l4QD6ii-21" target="IQdeU8apSQBM7l4QD6ii-23" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="IQdeU8apSQBM7l4QD6ii-21" value="getAllTasks()" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1"><mxGeometry x="1090" y="80" width="160" height="40" as="geometry"/></mxCell><mxCell id="IQdeU8apSQBM7l4QD6ii-26" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0;entryDx=0;entryDy=15;entryPerimeter=0;dashed=1;" parent="1" source="IQdeU8apSQBM7l4QD6ii-23" target="IQdeU8apSQBM7l4QD6ii-25" edge="1"><mxGeometry relative="1" as="geometry"><Array as="points"><mxPoint x="2040" y="100"/><mxPoint x="2040" y="255"/></Array></mxGeometry></mxCell><mxCell id="IQdeU8apSQBM7l4QD6ii-23" value="getAllSiteOperations()" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1"><mxGeometry x="1735" y="80" width="160" height="40" as="geometry"/></mxCell><mxCell id="IQdeU8apSQBM7l4QD6ii-25" value="Parsers DB (PostgreSQL)" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;" parent="1" vertex="1"><mxGeometry x="2100" y="240" width="100" height="120" as="geometry"/></mxCell><mxCell id="ghI51QlMgrLUa65lggI6-5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.25;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="ghI51QlMgrLUa65lggI6-2" target="ghI51QlMgrLUa65lggI6-4" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="ghI51QlMgrLUa65lggI6-37" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.75;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="ghI51QlMgrLUa65lggI6-2" target="ghI51QlMgrLUa65lggI6-36" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="ghI51QlMgrLUa65lggI6-2" value="checkThread(site_operation_id)" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1"><mxGeometry x="1075" y="400" width="190" height="40" as="geometry"/></mxCell><mxCell id="ghI51QlMgrLUa65lggI6-9" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="ghI51QlMgrLUa65lggI6-4" target="ghI51QlMgrLUa65lggI6-8" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="ghI51QlMgrLUa65lggI6-10" value="YES" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="ghI51QlMgrLUa65lggI6-9" vertex="1" connectable="0"><mxGeometry x="-0.7854" relative="1" as="geometry"><mxPoint x="14" as="offset"/></mxGeometry></mxCell><mxCell id="ghI51QlMgrLUa65lggI6-12" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="ghI51QlMgrLUa65lggI6-4" target="ghI51QlMgrLUa65lggI6-11" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="ghI51QlMgrLUa65lggI6-13" value="NO" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="ghI51QlMgrLUa65lggI6-12" vertex="1" connectable="0"><mxGeometry x="-0.6" y="1" relative="1" as="geometry"><mxPoint x="5" y="17" as="offset"/></mxGeometry></mxCell><mxCell id="ghI51QlMgrLUa65lggI6-4" value="Thread Exist?" style="rhombus;whiteSpace=wrap;html=1;" parent="1" vertex="1"><mxGeometry x="1350" y="370" width="120" height="80" as="geometry"/></mxCell><mxCell id="ghI51QlMgrLUa65lggI6-8" value="Response(206)" style="ellipse;whiteSpace=wrap;html=1;" parent="1" vertex="1"><mxGeometry x="1530" y="385" width="100" height="50" as="geometry"/></mxCell><mxCell id="ghI51QlMgrLUa65lggI6-21" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="ghI51QlMgrLUa65lggI6-11" target="ghI51QlMgrLUa65lggI6-14" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="ghI51QlMgrLUa65lggI6-11" value="createThread(site_operation_id)" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1"><mxGeometry x="1075" y="320" width="190" height="40" as="geometry"/></mxCell><mxCell id="ghI51QlMgrLUa65lggI6-29" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.25;entryDx=0;entryDy=0;" parent="1" source="ghI51QlMgrLUa65lggI6-14" target="ghI51QlMgrLUa65lggI6-23" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="ghI51QlMgrLUa65lggI6-14" value="changeParsingStatus&lt;br&gt;(siteOperationEntity, true)" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1"><mxGeometry x="1091.88" y="240" width="156.25" height="40" as="geometry"/></mxCell><mxCell id="ghI51QlMgrLUa65lggI6-59" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;dashed=1;" parent="1" source="ghI51QlMgrLUa65lggI6-22" target="IQdeU8apSQBM7l4QD6ii-25" edge="1"><mxGeometry relative="1" as="geometry"><Array as="points"><mxPoint x="2000" y="260"/><mxPoint x="2000" y="300"/></Array></mxGeometry></mxCell><mxCell id="ghI51QlMgrLUa65lggI6-22" value="getSiteOperationById(site_operation_id)" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1"><mxGeometry x="1700" y="240" width="230" height="40" as="geometry"/></mxCell><mxCell id="ghI51QlMgrLUa65lggI6-42" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0;entryDx=0;entryDy=37.5;entryPerimeter=0;dashed=1;" parent="1" source="ghI51QlMgrLUa65lggI6-23" target="IQdeU8apSQBM7l4QD6ii-25" edge="1"><mxGeometry relative="1" as="geometry"><Array as="points"><mxPoint x="2020" y="180"/><mxPoint x="2020" y="278"/></Array></mxGeometry></mxCell><mxCell id="ghI51QlMgrLUa65lggI6-23" value="saveSiteOperation(siteOperation)" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1"><mxGeometry x="1720" y="160" width="190" height="40" as="geometry"/></mxCell><mxCell id="ghI51QlMgrLUa65lggI6-30" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.25;exitDx=0;exitDy=0;entryX=1;entryY=0.25;entryDx=0;entryDy=0;dashed=1;dashPattern=8 8;endArrow=none;endFill=0;" parent="1" source="ghI51QlMgrLUa65lggI6-2" target="ghI51QlMgrLUa65lggI6-2" edge="1"><mxGeometry relative="1" as="geometry"><Array as="points"><mxPoint x="1190" y="410"/><mxPoint x="1190" y="410"/></Array></mxGeometry></mxCell><mxCell id="ghI51QlMgrLUa65lggI6-34" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0;entryY=0.75;entryDx=0;entryDy=0;" parent="1" source="ghI51QlMgrLUa65lggI6-32" target="ghI51QlMgrLUa65lggI6-2" edge="1"><mxGeometry relative="1" as="geometry"><Array as="points"><mxPoint x="1170" y="460"/><mxPoint x="1060" y="460"/><mxPoint x="1060" y="430"/></Array></mxGeometry></mxCell><mxCell id="ghI51QlMgrLUa65lggI6-32" value="stop(site_operation_id)" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1"><mxGeometry x="1097.5" y="480" width="145" height="40" as="geometry"/></mxCell><mxCell id="ghI51QlMgrLUa65lggI6-46" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=1;entryY=0.25;entryDx=0;entryDy=0;" parent="1" source="ghI51QlMgrLUa65lggI6-36" target="ghI51QlMgrLUa65lggI6-50" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="1310" y="600" as="targetPoint"/><Array as="points"><mxPoint x="1410" y="570"/></Array></mxGeometry></mxCell><mxCell id="ghI51QlMgrLUa65lggI6-47" value="YES" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="ghI51QlMgrLUa65lggI6-46" vertex="1" connectable="0"><mxGeometry x="-0.3065" y="4" relative="1" as="geometry"><mxPoint x="31" y="-24" as="offset"/></mxGeometry></mxCell><mxCell id="ghI51QlMgrLUa65lggI6-36" value="Thread Exist?" style="rhombus;whiteSpace=wrap;html=1;" parent="1" vertex="1"><mxGeometry x="1350" y="460" width="120" height="80" as="geometry"/></mxCell><mxCell id="ghI51QlMgrLUa65lggI6-38" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.75;exitDx=0;exitDy=0;entryX=1;entryY=0.75;entryDx=0;entryDy=0;dashed=1;dashPattern=8 8;endArrow=none;endFill=0;" parent="1" source="ghI51QlMgrLUa65lggI6-2" target="ghI51QlMgrLUa65lggI6-2" edge="1"><mxGeometry relative="1" as="geometry"><Array as="points"><mxPoint x="1180" y="430"/><mxPoint x="1180" y="430"/></Array></mxGeometry></mxCell><mxCell id="ghI51QlMgrLUa65lggI6-39" value="Response(404)" style="ellipse;whiteSpace=wrap;html=1;" parent="1" vertex="1"><mxGeometry x="1530" y="475" width="100" height="50" as="geometry"/></mxCell><mxCell id="ghI51QlMgrLUa65lggI6-40" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="ghI51QlMgrLUa65lggI6-36" target="ghI51QlMgrLUa65lggI6-39" edge="1"><mxGeometry relative="1" as="geometry"><mxPoint x="1480" y="420" as="sourcePoint"/><mxPoint x="1540" y="420" as="targetPoint"/></mxGeometry></mxCell><mxCell id="ghI51QlMgrLUa65lggI6-41" value="NO" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="ghI51QlMgrLUa65lggI6-40" vertex="1" connectable="0"><mxGeometry x="-0.7854" relative="1" as="geometry"><mxPoint x="14" as="offset"/></mxGeometry></mxCell><mxCell id="ghI51QlMgrLUa65lggI6-54" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.75;entryDx=0;entryDy=0;jumpStyle=none;" parent="1" source="ghI51QlMgrLUa65lggI6-45" target="ghI51QlMgrLUa65lggI6-23" edge="1"><mxGeometry relative="1" as="geometry"><Array as="points"><mxPoint x="1640" y="660"/><mxPoint x="1640" y="190"/></Array></mxGeometry></mxCell><mxCell id="ghI51QlMgrLUa65lggI6-45" value="changeParsingStatus&lt;br&gt;(siteOperationEntity, false)" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1"><mxGeometry x="1091.88" y="640" width="156.25" height="40" as="geometry"/></mxCell><mxCell id="ghI51QlMgrLUa65lggI6-52" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.75;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;dashed=1;" parent="1" source="ghI51QlMgrLUa65lggI6-50" target="ghI51QlMgrLUa65lggI6-22" edge="1"><mxGeometry relative="1" as="geometry"><Array as="points"><mxPoint x="1650" y="590"/><mxPoint x="1650" y="260"/></Array></mxGeometry></mxCell><mxCell id="ghI51QlMgrLUa65lggI6-53" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="1" source="ghI51QlMgrLUa65lggI6-50" target="ghI51QlMgrLUa65lggI6-45" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="ghI51QlMgrLUa65lggI6-50" value="stopThread(site_operation_id)" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1"><mxGeometry x="1075" y="560" width="190" height="40" as="geometry"/></mxCell><mxCell id="ghI51QlMgrLUa65lggI6-62" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="ghI51QlMgrLUa65lggI6-56" target="ghI51QlMgrLUa65lggI6-60" edge="1"><mxGeometry relative="1" as="geometry"><Array as="points"><mxPoint x="1660" y="740"/><mxPoint x="1660" y="340"/></Array></mxGeometry></mxCell><mxCell id="ghI51QlMgrLUa65lggI6-56" value="getLogs(site_operation_id)" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1"><mxGeometry x="1093.76" y="720" width="152.49" height="40" as="geometry"/></mxCell><mxCell id="ghI51QlMgrLUa65lggI6-63" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0;entryDx=0;entryDy=82.5;entryPerimeter=0;dashed=1;" parent="1" source="ghI51QlMgrLUa65lggI6-60" target="IQdeU8apSQBM7l4QD6ii-25" edge="1"><mxGeometry relative="1" as="geometry"><Array as="points"><mxPoint x="2000" y="340"/><mxPoint x="2000" y="323"/></Array></mxGeometry></mxCell><mxCell id="ghI51QlMgrLUa65lggI6-60" value="getReportBySiteOperationId(site_operation_id)" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1"><mxGeometry x="1685" y="320" width="260" height="40" as="geometry"/></mxCell><mxCell id="ghI51QlMgrLUa65lggI6-68" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" parent="1" source="ghI51QlMgrLUa65lggI6-65" target="ghI51QlMgrLUa65lggI6-67" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="ghI51QlMgrLUa65lggI6-65" value="getStatus(site_operation_id)" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1"><mxGeometry x="1086.88" y="800" width="166.25" height="40" as="geometry"/></mxCell><mxCell id="ghI51QlMgrLUa65lggI6-69" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.8;entryDx=0;entryDy=0;entryPerimeter=0;dashed=1;" parent="1" source="ghI51QlMgrLUa65lggI6-67" target="IQdeU8apSQBM7l4QD6ii-25" edge="1"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="ghI51QlMgrLUa65lggI6-67" value="getSiteOperationStatusById(site_operation_id)" style="rounded=0;whiteSpace=wrap;html=1;" parent="1" vertex="1"><mxGeometry x="1685" y="390" width="260" height="40" as="geometry"/></mxCell><mxCell id="3" value="ParseRepository" style="rounded=0;whiteSpace=wrap;html=1;fontSize=13;fontStyle=1;verticalAlign=top;fillColor=none;dashed=1;dashPattern=12 12;" vertex="1" parent="1"><mxGeometry x="1670" y="40" width="290" height="440" as="geometry"/></mxCell><mxCell id="4" value="TaskService" style="rounded=0;whiteSpace=wrap;html=1;fontSize=13;fontStyle=1;verticalAlign=top;fillColor=none;dashed=1;dashPattern=12 12;" vertex="1" parent="1"><mxGeometry x="1050" y="40" width="240" height="840" as="geometry"/></mxCell><mxCell id="5" value="TaskController" style="rounded=0;whiteSpace=wrap;html=1;verticalAlign=top;fillColor=none;dashed=1;dashPattern=12 12;fontSize=13;fontStyle=1" vertex="1" parent="1"><mxGeometry x="775" y="40" width="240" height="440" as="geometry"/></mxCell><mxCell id="6" value="Tasks" style="rounded=0;whiteSpace=wrap;html=1;fontStyle=1;fontSize=14;" vertex="1" parent="1"><mxGeometry width="80" height="40" as="geometry"/></mxCell><mxCell id="7" value="Version 1" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1"><mxGeometry x="2133" width="67" height="40" as="geometry"/></mxCell><mxCell id="8" value="&lt;b&gt;Данные отображения&lt;/b&gt;:&lt;br&gt;список задач;&lt;br&gt;задача(название задачи, название сайта, краткое описание таски);&lt;br&gt;&lt;br&gt;Будут кнопки на фронте:&lt;br&gt;запустить задачу;&lt;br&gt;остановить задачу;&lt;br&gt;посмотреть логи;&lt;br&gt;проверить статус парсинга;&lt;br&gt;&lt;br&gt;&lt;b&gt;Бэк&lt;/b&gt;:&lt;br&gt;&lt;b&gt;получение списка задач&lt;/b&gt;:&lt;br&gt;вызов метода контроллера (TaskController#all) -&lt;br&gt;метод получения полного списка задач (TaskService#getAllTasks() -&lt;br&gt;метод получения всех site_operations из базы (ParseRepository#getAllSiteOptions() -&lt;br&gt;если есть, то вызврат 200&lt;br&gt;если пустая таблица - 204 (нет данных)&lt;br&gt;если ошибка - 500;&lt;br&gt;&lt;br&gt;&lt;b&gt;запустить задачу&lt;/b&gt;:&lt;br&gt;вызов метода контроллера (TaskController#start(site_option:json)) -&lt;br&gt;вызов сервиса управления парсерами (TaskService#start(site_option:json)) -&lt;br&gt;проверка на существование потока (TaskService#checkThread(site_option_id) -&lt;br&gt;если есть, то возврат 206 (уже вызывалось)&lt;br&gt;если нет, то:&lt;br style=&quot;border-color: var(--border-color);&quot;&gt;создание и сохранение отдельного потока в HashMap (TaskService#createThread(site_option_id)) -&amp;nbsp;&lt;br&gt;вызов метода парсинга (ParseService#startNewParsing(site_option_id, settings) -&lt;br&gt;изменение флага в таблице (ParseService#changeParsingStatus(site_option_id, true):&lt;br&gt;сохранить site_operation (ParseRepository#saveSiteOption(site_option:json)) -&lt;br&gt;если успешно запущен поток парсинга возвращает 200&lt;br&gt;если ошибка - 500;&lt;br&gt;&lt;br&gt;&lt;b&gt;остановить задачу&lt;/b&gt;:&lt;br&gt;(TaskController#stop(site_option_id)) -&lt;br&gt;(TaskService#stop(site_option_id)) -&lt;br&gt;проверка, есть ли поток с данным id в списке выполняемых (TaskService#checkThread(site_option_id)) -&lt;br&gt;если нет, то возврат 404 (не найдено)&lt;br&gt;если есть, то:&lt;br&gt;вызов метода прерывающий выполнение потока (TaskService#stopThread(site_option_id)) -&lt;br style=&quot;border-color: var(--border-color);&quot;&gt;изменение флага в таблице (ParseService#changeParsingStatus(site_option_id, false) -&lt;br style=&quot;border-color: var(--border-color);&quot;&gt;сохранить site_operation (ParseRepository#saveSiteOption(site_option:json)) -&lt;br&gt;если успешно, то возврат 200&lt;br&gt;если ошибка - 500;&lt;br&gt;&lt;br&gt;&lt;b&gt;посмотреть логи&lt;/b&gt;:&lt;br&gt;(TaskConntroller#getLogs(site_option_id)) -&lt;br&gt;(TaskService#getLogs(site_option_id)) -&lt;br&gt;получение из базы данных (ParseRepository#getReportBySiteOptionId(site_option_id)) -&lt;br&gt;если есть, то возвращается 200&lt;br&gt;если нет - 204 (нет данных)&lt;br&gt;если ошибка - 500;&lt;br&gt;&lt;br&gt;&lt;b&gt;проверить статус парсинга&lt;/b&gt;:&lt;br&gt;(TaskController#getStatus(site_option_id)) -&lt;br&gt;(TaskService#getStatus(site_option_id)) -&lt;br&gt;(ParseRepository#getSiteOptionStatusById(site_option_id)) -&lt;br&gt;если успех вернуть 200&lt;br&gt;если ошибка - 500" style="rounded=0;whiteSpace=wrap;html=1;verticalAlign=top;align=center;" vertex="1" parent="1"><mxGeometry y="40" width="606" height="840" as="geometry"/></mxCell><mxCell id="9" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="10" target="20"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="10" value="Получить список задач" style="ellipse;whiteSpace=wrap;html=1;" vertex="1" parent="1"><mxGeometry x="610" y="60" width="120" height="80" as="geometry"/></mxCell><mxCell id="11" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="12" target="22"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="12" value="Запустить задачу" style="ellipse;whiteSpace=wrap;html=1;" vertex="1" parent="1"><mxGeometry x="610" y="140" width="120" height="80" as="geometry"/></mxCell><mxCell id="13" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="14" target="24"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="14" value="Остановить задачу" style="ellipse;whiteSpace=wrap;html=1;" vertex="1" parent="1"><mxGeometry x="610" y="220" width="120" height="80" as="geometry"/></mxCell><mxCell id="15" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="16" target="26"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="16" value="Посмотреть логи" style="ellipse;whiteSpace=wrap;html=1;" vertex="1" parent="1"><mxGeometry x="610" y="300" width="120" height="80" as="geometry"/></mxCell><mxCell id="17" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="18" target="28"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="18" value="Проверить статус парсинга" style="ellipse;whiteSpace=wrap;html=1;" vertex="1" parent="1"><mxGeometry x="610" y="380" width="120" height="80" as="geometry"/></mxCell><mxCell id="19" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="20" target="32"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="20" value="all(GET)" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1"><mxGeometry x="810" y="80" width="170" height="40" as="geometry"/></mxCell><mxCell id="21" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="22" target="30"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="22" value="start(POST)&lt;br&gt;* requestBody (site_option:json)" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1"><mxGeometry x="805" y="160" width="180" height="40" as="geometry"/></mxCell><mxCell id="23" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="24" target="55"><mxGeometry relative="1" as="geometry"><Array as="points"><mxPoint x="1030" y="260"/><mxPoint x="1030" y="500"/></Array></mxGeometry></mxCell><mxCell id="24" value="stop(PATCH)&lt;br&gt;* site_option_id" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1"><mxGeometry x="810" y="240" width="170" height="40" as="geometry"/></mxCell><mxCell id="25" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="26" target="69"><mxGeometry relative="1" as="geometry"><Array as="points"><mxPoint x="1000" y="340"/><mxPoint x="1000" y="740"/></Array></mxGeometry></mxCell><mxCell id="26" value="getLogs(GET)&lt;br&gt;* site_option_id" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1"><mxGeometry x="810" y="320" width="170" height="40" as="geometry"/></mxCell><mxCell id="27" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="28" target="73"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="28" value="getStatus(GET)&lt;br&gt;* site_option_id" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1"><mxGeometry x="810" y="400" width="170" height="40" as="geometry"/></mxCell><mxCell id="29" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0;entryY=0.25;entryDx=0;entryDy=0;" edge="1" parent="1" source="30" target="38"><mxGeometry relative="1" as="geometry"><Array as="points"><mxPoint x="1170" y="220"/><mxPoint x="1060" y="220"/><mxPoint x="1060" y="410"/></Array></mxGeometry></mxCell><mxCell id="30" value="start(site_option:json)" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1"><mxGeometry x="1090" y="160" width="160" height="40" as="geometry"/></mxCell><mxCell id="31" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="32" target="34"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="32" value="getAllTasks()" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1"><mxGeometry x="1090" y="80" width="160" height="40" as="geometry"/></mxCell><mxCell id="33" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0;entryDx=0;entryDy=15;entryPerimeter=0;dashed=1;" edge="1" parent="1" source="34" target="35"><mxGeometry relative="1" as="geometry"><Array as="points"><mxPoint x="2040" y="100"/><mxPoint x="2040" y="255"/></Array></mxGeometry></mxCell><mxCell id="34" value="getAllSiteOptions()" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1"><mxGeometry x="1735" y="80" width="160" height="40" as="geometry"/></mxCell><mxCell id="35" value="Parsers DB (PostgreSQL)" style="shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;" vertex="1" parent="1"><mxGeometry x="2100" y="240" width="100" height="120" as="geometry"/></mxCell><mxCell id="36" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.25;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="38" target="43"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="37" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.75;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="38" target="58"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="38" value="checkThread(site_option_id)" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1"><mxGeometry x="1075" y="400" width="190" height="40" as="geometry"/></mxCell><mxCell id="39" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="43" target="44"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="40" value="YES" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="39"><mxGeometry x="-0.7854" relative="1" as="geometry"><mxPoint x="14" as="offset"/></mxGeometry></mxCell><mxCell id="41" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="43" target="46"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="42" value="NO" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="41"><mxGeometry x="-0.6" y="1" relative="1" as="geometry"><mxPoint x="5" y="17" as="offset"/></mxGeometry></mxCell><mxCell id="43" value="Thread Exist?" style="rhombus;whiteSpace=wrap;html=1;" vertex="1" parent="1"><mxGeometry x="1350" y="370" width="120" height="80" as="geometry"/></mxCell><mxCell id="44" value="Response(206)" style="ellipse;whiteSpace=wrap;html=1;" vertex="1" parent="1"><mxGeometry x="1530" y="385" width="100" height="50" as="geometry"/></mxCell><mxCell id="45" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" edge="1" parent="1" source="46" target="48"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="46" value="createThread(site_option_id)" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1"><mxGeometry x="1075" y="320" width="190" height="40" as="geometry"/></mxCell><mxCell id="47" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.25;entryDx=0;entryDy=0;" edge="1" parent="1" source="48" target="52"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="48" value="changeParsingStatus&lt;br&gt;(site_option:json, true)" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1"><mxGeometry x="1091.88" y="240" width="156.25" height="40" as="geometry"/></mxCell><mxCell id="49" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;entryPerimeter=0;dashed=1;" edge="1" parent="1" source="50" target="35"><mxGeometry relative="1" as="geometry"><Array as="points"><mxPoint x="2000" y="260"/><mxPoint x="2000" y="300"/></Array></mxGeometry></mxCell><mxCell id="50" value="getSiteOptionById(site_option_id)" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1"><mxGeometry x="1700" y="240" width="230" height="40" as="geometry"/></mxCell><mxCell id="51" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0;entryDx=0;entryDy=37.5;entryPerimeter=0;dashed=1;" edge="1" parent="1" source="52" target="35"><mxGeometry relative="1" as="geometry"><Array as="points"><mxPoint x="2020" y="180"/><mxPoint x="2020" y="278"/></Array></mxGeometry></mxCell><mxCell id="52" value="saveSiteOption(site_option:json)" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1"><mxGeometry x="1720" y="160" width="190" height="40" as="geometry"/></mxCell><mxCell id="53" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.25;exitDx=0;exitDy=0;entryX=1;entryY=0.25;entryDx=0;entryDy=0;dashed=1;dashPattern=8 8;endArrow=none;endFill=0;" edge="1" parent="1" source="38" target="38"><mxGeometry relative="1" as="geometry"><Array as="points"><mxPoint x="1190" y="410"/><mxPoint x="1190" y="410"/></Array></mxGeometry></mxCell><mxCell id="54" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0;entryY=0.75;entryDx=0;entryDy=0;" edge="1" parent="1" source="55" target="38"><mxGeometry relative="1" as="geometry"><Array as="points"><mxPoint x="1170" y="460"/><mxPoint x="1060" y="460"/><mxPoint x="1060" y="430"/></Array></mxGeometry></mxCell><mxCell id="55" value="stop(site_option_id)" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1"><mxGeometry x="1097.5" y="480" width="145" height="40" as="geometry"/></mxCell><mxCell id="56" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=1;entryY=0.25;entryDx=0;entryDy=0;" edge="1" parent="1" source="58" target="67"><mxGeometry relative="1" as="geometry"><mxPoint x="1310" y="600" as="targetPoint"/><Array as="points"><mxPoint x="1410" y="570"/></Array></mxGeometry></mxCell><mxCell id="57" value="YES" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="56"><mxGeometry x="-0.3065" y="4" relative="1" as="geometry"><mxPoint x="31" y="-24" as="offset"/></mxGeometry></mxCell><mxCell id="58" value="Thread Exist?" style="rhombus;whiteSpace=wrap;html=1;" vertex="1" parent="1"><mxGeometry x="1350" y="460" width="120" height="80" as="geometry"/></mxCell><mxCell id="59" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.75;exitDx=0;exitDy=0;entryX=1;entryY=0.75;entryDx=0;entryDy=0;dashed=1;dashPattern=8 8;endArrow=none;endFill=0;" edge="1" parent="1" source="38" target="38"><mxGeometry relative="1" as="geometry"><Array as="points"><mxPoint x="1180" y="430"/><mxPoint x="1180" y="430"/></Array></mxGeometry></mxCell><mxCell id="60" value="Response(404)" style="ellipse;whiteSpace=wrap;html=1;" vertex="1" parent="1"><mxGeometry x="1530" y="475" width="100" height="50" as="geometry"/></mxCell><mxCell id="61" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="58" target="60"><mxGeometry relative="1" as="geometry"><mxPoint x="1480" y="420" as="sourcePoint"/><mxPoint x="1540" y="420" as="targetPoint"/></mxGeometry></mxCell><mxCell id="62" value="NO" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="61"><mxGeometry x="-0.7854" relative="1" as="geometry"><mxPoint x="14" as="offset"/></mxGeometry></mxCell><mxCell id="63" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.75;entryDx=0;entryDy=0;jumpStyle=none;" edge="1" parent="1" source="64" target="52"><mxGeometry relative="1" as="geometry"><Array as="points"><mxPoint x="1640" y="660"/><mxPoint x="1640" y="190"/></Array></mxGeometry></mxCell><mxCell id="64" value="changeParsingStatus&lt;br&gt;(site_option:json, false)" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1"><mxGeometry x="1091.88" y="640" width="156.25" height="40" as="geometry"/></mxCell><mxCell id="65" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.75;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;dashed=1;" edge="1" parent="1" source="67" target="50"><mxGeometry relative="1" as="geometry"><Array as="points"><mxPoint x="1650" y="590"/><mxPoint x="1650" y="260"/></Array></mxGeometry></mxCell><mxCell id="66" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="67" target="64"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="67" value="stopThread(site_option_id)" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1"><mxGeometry x="1075" y="560" width="190" height="40" as="geometry"/></mxCell><mxCell id="68" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="69" target="71"><mxGeometry relative="1" as="geometry"><Array as="points"><mxPoint x="1660" y="740"/><mxPoint x="1660" y="340"/></Array></mxGeometry></mxCell><mxCell id="69" value="getLogs(site_option_id)" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1"><mxGeometry x="1093.76" y="720" width="152.49" height="40" as="geometry"/></mxCell><mxCell id="70" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0;entryDx=0;entryDy=82.5;entryPerimeter=0;dashed=1;" edge="1" parent="1" source="71" target="35"><mxGeometry relative="1" as="geometry"><Array as="points"><mxPoint x="2000" y="340"/><mxPoint x="2000" y="323"/></Array></mxGeometry></mxCell><mxCell id="71" value="getReportBySiteOptionId(site_option_id)" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1"><mxGeometry x="1685" y="320" width="260" height="40" as="geometry"/></mxCell><mxCell id="72" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" edge="1" parent="1" source="73" target="75"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="73" value="getStatus(site_option_id)" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1"><mxGeometry x="1086.88" y="800" width="166.25" height="40" as="geometry"/></mxCell><mxCell id="74" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.8;entryDx=0;entryDy=0;entryPerimeter=0;dashed=1;" edge="1" parent="1" source="75" target="35"><mxGeometry relative="1" as="geometry"/></mxCell><mxCell id="75" value="getSiteOptionStatusById(site_option_id)" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1"><mxGeometry x="1685" y="390" width="260" height="40" as="geometry"/></mxCell></root></mxGraphModel></diagram></mxfile>